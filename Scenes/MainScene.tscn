[gd_scene load_steps=15 format=3 uid="uid://dmyfdjltetw2d"]

[ext_resource type="Script" path="res://src/SceneCode/MainScene.cs" id="1_klk3w"]
[ext_resource type="Script" path="res://src/Party/Player/PartyPlayer.cs" id="3_53yld"]
[ext_resource type="Resource" uid="uid://d0bu2gll3u4xb" path="res://GameDataResources/Attacks/PlayerData.tres" id="4_iwfah"]
[ext_resource type="Texture2D" uid="uid://k4q8rnj22dsh" path="res://Assets/Textures/MainCharacterIcon.png" id="4_mph3w"]
[ext_resource type="PackedScene" uid="uid://d21hljw8t080d" path="res://Scenes/Subscenes/SocialBattery.tscn" id="5_t55tw"]
[ext_resource type="Texture2D" uid="uid://ceb1ia7oecf7l" path="res://Assets/Textures/PlayerSightCone.png" id="6_k7ig0"]
[ext_resource type="FontFile" uid="uid://dnj361fu4us32" path="res://Assets/Fonts/Lobster-Regular.ttf" id="6_q8ytb"]
[ext_resource type="Theme" uid="uid://bpp0q38rfd1ms" path="res://Assets/Themes/Lobster.tres" id="7_yess5"]
[ext_resource type="Script" path="res://src/GameTimer.cs" id="8_28aws"]
[ext_resource type="Texture2D" uid="uid://c6bque4e81yg4" path="res://Assets/UI/Icons/PauseIcon.png" id="8_mivmb"]
[ext_resource type="Texture2D" uid="uid://dw0fjgs4yx85r" path="res://Assets/UI/Icons/PauseIcon_hover.png" id="9_tqae0"]
[ext_resource type="PackedScene" uid="uid://bkprvu4f5y5no" path="res://Scenes/PauseScene.tscn" id="12_3yaqs"]

[sub_resource type="CircleShape2D" id="CircleShape2D_rv6dr"]
radius = 14.6245

[sub_resource type="LabelSettings" id="LabelSettings_3w7eg"]
line_spacing = -35.0
font = ExtResource("6_q8ytb")
font_size = 110
font_color = Color(1, 0.8, 0.701961, 1)
shadow_size = 10
shadow_color = Color(0.12549, 0.0431373, 0.145098, 1)
shadow_offset = Vector2(8, 8)

[node name="MainScene" type="Node2D" node_paths=PackedStringArray("_encounterLayer", "_socialBattery", "_camera", "_player")]
script = ExtResource("1_klk3w")
_encounterLayer = NodePath("EncounterLayer")
_socialBattery = NodePath("Characters/Player/Camera2D/TextureProgressBar")
_camera = NodePath("Characters/Player/Camera2D")
_player = NodePath("Characters/Player")

[node name="Characters" type="CanvasLayer" parent="."]
follow_viewport_enabled = true

[node name="Player" type="CharacterBody2D" parent="Characters" node_paths=PackedStringArray("_agent", "_discoveryLight") groups=["Player"]]
position = Vector2(1119, 2738)
script = ExtResource("3_53yld")
_data = ExtResource("4_iwfah")
_sightConeSegments = 10
_sightConeAngleDegrees = 120.0
_sightConeRadius = 800.0
_agent = NodePath("NavigationAgent2D")
_movementSpeed = 150.0
_discoveryLight = NodePath("PointLight2D")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Characters/Player" groups=["Player"]]
scale = Vector2(3.285, 3.285)
shape = SubResource("CircleShape2D_rv6dr")

[node name="Sprite2D" type="Sprite2D" parent="Characters/Player"]
position = Vector2(-2.38419e-07, -1.52588e-05)
scale = Vector2(1.5, 1.5)
texture = ExtResource("4_mph3w")

[node name="NavigationAgent2D" type="NavigationAgent2D" parent="Characters/Player"]
path_desired_distance = 21.25
target_desired_distance = 21.25
avoidance_enabled = true
radius = 20.0
time_horizon_agents = 0.66
debug_enabled = true

[node name="Camera2D" type="Camera2D" parent="Characters/Player"]

[node name="TextureProgressBar" parent="Characters/Player/Camera2D" instance=ExtResource("5_t55tw")]
offset_left = -876.0
offset_top = -506.0
offset_right = -663.0
offset_bottom = -404.0
max_value = 100.0
value = 100.0
texture_progress_offset = Vector2(22.855, 23.94)
metadata/_edit_use_anchors_ = true

[node name="PointLight2D" type="PointLight2D" parent="Characters/Player" groups=["PlayerVision"]]
shadow_enabled = true
shadow_filter = 1
texture = ExtResource("6_k7ig0")

[node name="EncounterLayer" type="CanvasLayer" parent="."]
layer = 2
visible = false

[node name="Timer" type="Timer" parent="." node_paths=PackedStringArray("_displayLabel")]
one_shot = true
script = ExtResource("8_28aws")
_displayLabel = NodePath("../CanvasLayer/Countdown")

[node name="CanvasLayer" type="CanvasLayer" parent="."]
layer = 3

[node name="PauseScene" parent="CanvasLayer" instance=ExtResource("12_3yaqs")]
visible = false

[node name="PauseButton" type="TextureButton" parent="CanvasLayer"]
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -64.0
offset_bottom = 65.0
grow_horizontal = 0
texture_normal = ExtResource("8_mivmb")
texture_pressed = ExtResource("9_tqae0")
texture_hover = ExtResource("9_tqae0")

[node name="Countdown" type="Label" parent="CanvasLayer"]
layout_direction = 2
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -138.5
offset_right = 138.5
offset_bottom = 180.0
grow_horizontal = 2
text = "0:00"
label_settings = SubResource("LabelSettings_3w7eg")
horizontal_alignment = 1

[node name="Label" type="Label" parent="CanvasLayer/Countdown"]
layout_mode = 0
offset_top = 128.0
offset_right = 250.0
offset_bottom = 154.0
theme = ExtResource("7_yess5")
theme_type_variation = &"LabelShadow"
theme_override_font_sizes/font_size = 22
text = "Until Karaoke Time"
horizontal_alignment = 1

[node name="Panel" type="Panel" parent="CanvasLayer"]
visible = false
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -349.0
offset_top = -179.0
offset_right = 255.0
offset_bottom = 324.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("7_yess5")

[node name="MarginContainer" type="MarginContainer" parent="CanvasLayer/Panel"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("7_yess5")

[node name="VBoxContainer" type="VBoxContainer" parent="CanvasLayer/Panel/MarginContainer"]
layout_mode = 2

[node name="Label" type="Label" parent="CanvasLayer/Panel/MarginContainer/VBoxContainer"]
layout_mode = 2
text = "Welcome to The Elegant Exit!"

[connection signal="pressed" from="CanvasLayer/PauseButton" to="CanvasLayer/PauseScene" method="OnPauseButtonPressed"]
