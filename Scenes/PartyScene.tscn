[gd_scene load_steps=12 format=3 uid="uid://dmfp5lawyswyl"]

[ext_resource type="Script" path="res://src/PartyScene.cs" id="1_mj4je"]
[ext_resource type="Texture2D" uid="uid://b3iq1r4aqyun" path="res://Assets/Sprites/Environment.png" id="2_6yq0k"]
[ext_resource type="PackedScene" uid="uid://d21hljw8t080d" path="res://Scenes/Subscenes/SocialBattery.tscn" id="4_8rkpa"]
[ext_resource type="Texture2D" uid="uid://d3hx3upwa0rgm" path="res://Assets/Sprites/door.png" id="4_wxte6"]
[ext_resource type="Script" path="res://src/Movement.cs" id="5_u7m7i"]
[ext_resource type="Texture2D" uid="uid://cvmv3sr1jrvrj" path="res://Assets/Sprites/PersonIcon.png" id="6_iic4b"]
[ext_resource type="Script" path="res://src/Enemy.cs" id="7_kk71b"]
[ext_resource type="Resource" uid="uid://dgmh740a8kil7" path="res://GameDataResources/EnemyData/Babi.tres" id="8_g1nty"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_ky745"]
vertices = PackedVector2Array(1894, 494, 2166, 125, 2167, 623, 1894, 529, 1893, 266, 1894, 224, 1512, 445, 1824, 445, 1823, 487, 1513, 490, 1366, 862, 1113, 862, 1114, 771, 1182, 771, 1366, 832, 1893, 125, 1826, 224, 1826, 266, 1629, 692, 1825, 692, 1826, 937, 1434, 937, 1434, 832, 1586, 692, 1434, 745, 1485, 692, 1433, 792, 1366, 792, 1222, 771, 1894, 623, 1825, 532, 1825, 624, 1629, 624, 1586, 623, 1510, 530, 1366, 771, 1182, 703, 1225, 703, 929, 703, 929, 554, 1080, 554, 1052, 485, 929, 485, 929, 409, 1087, 451, 861, 409, 861, 659, 512, 659, 512, 159, 859, 159, 861, 364, 929, 372, 929, 125, 1154, 125, 1154, 383, 1121, 422, 1223, 411, 1223, 124, 1826, 124, 1442, 377, 1826, 376, 1442, 490, 1511, 623, 1442, 530, 1135, 499, 1170, 467, 1442, 639, 1380, 703)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3), PackedInt32Array(1, 0, 4, 5), PackedInt32Array(6, 7, 8, 9), PackedInt32Array(10, 11, 12, 13, 14), PackedInt32Array(5, 15, 1), PackedInt32Array(16, 5, 4, 17), PackedInt32Array(18, 19, 20, 21, 22), PackedInt32Array(23, 18, 22), PackedInt32Array(24, 25, 23, 22, 26), PackedInt32Array(26, 22, 14, 27), PackedInt32Array(27, 14, 13, 28), PackedInt32Array(2, 29, 3), PackedInt32Array(9, 8, 30, 31, 32, 33, 34), PackedInt32Array(32, 18, 23, 33), PackedInt32Array(28, 35, 27), PackedInt32Array(28, 13, 36, 37), PackedInt32Array(36, 38, 39, 40), PackedInt32Array(41, 42, 43, 44), PackedInt32Array(45, 46, 47, 48, 49), PackedInt32Array(45, 49, 50), PackedInt32Array(45, 50, 51, 43), PackedInt32Array(51, 52, 53, 54, 55), PackedInt32Array(43, 51, 55, 44), PackedInt32Array(56, 57, 58, 16), PackedInt32Array(56, 16, 17, 59), PackedInt32Array(17, 60, 59), PackedInt32Array(56, 59, 61), PackedInt32Array(33, 62, 34), PackedInt32Array(0, 3, 30, 8), PackedInt32Array(61, 9, 34, 63), PackedInt32Array(37, 36, 40, 64, 65), PackedInt32Array(64, 44, 55, 65), PackedInt32Array(63, 66, 67, 37, 65, 56), PackedInt32Array(56, 61, 63)])
outlines = Array[PackedVector2Array]([PackedVector2Array(2190.91, 99.5282, 2191.58, 648, 2000, 648, 1869.46, 647.612, 1868.79, 555.48, 1849.96, 556.152, 1849.96, 648.957, 1654.26, 648.957, 1653.59, 667.114, 1849.96, 667.114, 1850.63, 961.667, 1408.8, 961.667, 1408.8, 857.43, 1362.4, 858.102, 1371.14, 766.643, 1409.47, 767.316, 1410.14, 735.036, 1475.38, 667.114, 1561.46, 667.114, 1561.46, 648.284, 1486.14, 648.284, 1485.46, 555.48, 1466.63, 554.807, 1466.63, 648.957, 1389.97, 727.638, 1248.75, 727.638, 1248.07, 746.468, 1390.64, 746.468, 1391.31, 887.02, 1088.02, 887.02, 1088.69, 746.468, 1156.61, 746.468, 1156.61, 728.311, 904.428, 728.311, 904.428, 528.58, 1069.86, 528.58, 1100.12, 498.99, 1087.35, 486.213, 1063.14, 510.423, 904.428, 510.423, 904.428, 433.758, 885.599, 433.758, 885.599, 683.926, 487.482, 683.926, 488.154, 135.17, 884.254, 134.498, 886.271, 342.299, 904.428, 343.644, 904.428, 99.5282, 1179.48, 99.5282, 1179.48, 392.736, 1155.94, 419.636, 1168.72, 432.413, 1198.31, 400.806, 1198.31, 98.8557, 1850.63, 99.5282, 1850.63, 401.478, 1467.31, 402.151, 1466.63, 464.693, 1486.81, 464.693, 1486.14, 420.308, 1849.96, 420.308, 1849.28, 464.02, 1868.79, 466.038, 1868.11, 290.517, 1849.96, 290.517, 1850.63, 199.057, 1868.79, 199.057, 1868.11, 99.5282)])
source_geometry_group_name = &"navigation_polygon_source_group"
agent_radius = 25.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_sq75s"]
size = Vector2(8, 130)

[sub_resource type="CircleShape2D" id="CircleShape2D_rv6dr"]
radius = 8.83325

[node name="Node2D" type="Node2D" node_paths=PackedStringArray("_socialBattery")]
script = ExtResource("1_mj4je")
_socialBattery = NodePath("GroundFloor/Characters/CharacterBody2D5/Camera2D/TextureProgressBar")

[node name="CanvasLayer" type="CanvasLayer" parent="."]
process_mode = 4
visible = false

[node name="GroundFloor" type="Node2D" parent="."]

[node name="EnvironmentTest" type="Sprite2D" parent="GroundFloor"]
position = Vector2(1434.56, 809.002)
scale = Vector2(1.48704, 1.48704)
texture = ExtResource("2_6yq0k")

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="GroundFloor"]
position = Vector2(-558.885, 20.0016)
scale = Vector2(1.487, 1.487)
navigation_polygon = SubResource("NavigationPolygon_ky745")

[node name="Doors" type="Node2D" parent="GroundFloor"]

[node name="Door" type="Node2D" parent="GroundFloor/Doors"]
position = Vector2(-60, 0)

[node name="RigidBody2D" type="RigidBody2D" parent="GroundFloor/Doors/Door"]
position = Vector2(1696, 784)
gravity_scale = 0.0

[node name="Sprite2D" type="Sprite2D" parent="GroundFloor/Doors/Door/RigidBody2D"]
position = Vector2(0, -6.0001)
scale = Vector2(1, 1.41304)
texture = ExtResource("4_wxte6")

[node name="NavigationObstacle2D" type="NavigationObstacle2D" parent="GroundFloor/Doors/Door/RigidBody2D"]
avoidance_enabled = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="GroundFloor/Doors/Door/RigidBody2D"]
position = Vector2(0, -6)
shape = SubResource("RectangleShape2D_sq75s")

[node name="StaticBody2D2" type="StaticBody2D" parent="GroundFloor/Doors/Door"]
position = Vector2(865, 192)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="GroundFloor/Doors/Door/StaticBody2D2"]
position = Vector2(830, 714)
polygon = PackedVector2Array(-12, -49, 1, -62, 14, -48, 14, 78, -12, 78)

[node name="PinJoint2D2" type="PinJoint2D" parent="GroundFloor/Doors/Door"]
position = Vector2(1696, 844)
node_a = NodePath("../RigidBody2D")
node_b = NodePath("../StaticBody2D2")
disable_collision = false

[node name="Door2" type="Node2D" parent="GroundFloor/Doors"]
position = Vector2(-60, 0)

[node name="RigidBody2D" type="RigidBody2D" parent="GroundFloor/Doors/Door2"]
position = Vector2(831, 595)
gravity_scale = 0.0

[node name="Sprite2D" type="Sprite2D" parent="GroundFloor/Doors/Door2/RigidBody2D"]
position = Vector2(0, 6.24988)
scale = Vector2(1, 1.39674)
texture = ExtResource("4_wxte6")

[node name="NavigationObstacle2D" type="NavigationObstacle2D" parent="GroundFloor/Doors/Door2/RigidBody2D"]
avoidance_enabled = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="GroundFloor/Doors/Door2/RigidBody2D"]
position = Vector2(0, 6.5)
shape = SubResource("RectangleShape2D_sq75s")

[node name="StaticBody2D2" type="StaticBody2D" parent="GroundFloor/Doors/Door2"]
position = Vector2(0, 13)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="GroundFloor/Doors/Door2/StaticBody2D2"]
position = Vector2(830, 714)
polygon = PackedVector2Array(-12, -49, 1, -62, 14, -48, 14, 78, -12, 78)

[node name="PinJoint2D2" type="PinJoint2D" parent="GroundFloor/Doors/Door2"]
position = Vector2(831, 665)
node_a = NodePath("../RigidBody2D")
node_b = NodePath("../StaticBody2D2")
bias = 0.9
disable_collision = false
angular_limit_enabled = true
angular_limit_lower = -1.5708
angular_limit_upper = 1.5708

[node name="Door3" type="Node2D" parent="GroundFloor/Doors"]
position = Vector2(-60, 15)

[node name="RigidBody2D" type="RigidBody2D" parent="GroundFloor/Doors/Door3"]
position = Vector2(2266, 363)
gravity_scale = 0.0

[node name="Sprite2D" type="Sprite2D" parent="GroundFloor/Doors/Door3/RigidBody2D"]
position = Vector2(0, 7)
scale = Vector2(1, 1.41304)
texture = ExtResource("4_wxte6")

[node name="NavigationObstacle2D" type="NavigationObstacle2D" parent="GroundFloor/Doors/Door3/RigidBody2D"]
avoidance_enabled = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="GroundFloor/Doors/Door3/RigidBody2D"]
position = Vector2(0, 6.5)
shape = SubResource("RectangleShape2D_sq75s")

[node name="StaticBody2D2" type="StaticBody2D" parent="GroundFloor/Doors/Door3"]
position = Vector2(1435, -217)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="GroundFloor/Doors/Door3/StaticBody2D2"]
position = Vector2(830, 714)
polygon = PackedVector2Array(-12, -49, 1, -62, 14, -48, 14, 78, -12, 78)

[node name="PinJoint2D2" type="PinJoint2D" parent="GroundFloor/Doors/Door3"]
position = Vector2(2266, 435)
node_a = NodePath("../RigidBody2D")
node_b = NodePath("../StaticBody2D2")
disable_collision = false

[node name="Door4" type="Node2D" parent="GroundFloor/Doors"]
position = Vector2(-60, 0)

[node name="RigidBody2D" type="RigidBody2D" parent="GroundFloor/Doors/Door4"]
position = Vector2(2267, 773)
gravity_scale = 0.0

[node name="Sprite2D" type="Sprite2D" parent="GroundFloor/Doors/Door4/RigidBody2D"]
position = Vector2(0, 5.00001)
scale = Vector2(1, 1.41304)
texture = ExtResource("4_wxte6")

[node name="NavigationObstacle2D" type="NavigationObstacle2D" parent="GroundFloor/Doors/Door4/RigidBody2D"]
avoidance_enabled = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="GroundFloor/Doors/Door4/RigidBody2D"]
position = Vector2(0, 6.5)
shape = SubResource("RectangleShape2D_sq75s")

[node name="StaticBody2D2" type="StaticBody2D" parent="GroundFloor/Doors/Door4"]
position = Vector2(1436, 192)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="GroundFloor/Doors/Door4/StaticBody2D2"]
position = Vector2(830, 714)
polygon = PackedVector2Array(-12, -49, 1, -62, 14, -48, 14, 78, -12, 78)

[node name="PinJoint2D2" type="PinJoint2D" parent="GroundFloor/Doors/Door4"]
position = Vector2(2267, 844)
node_a = NodePath("../RigidBody2D")
node_b = NodePath("../StaticBody2D2")
disable_collision = false

[node name="Door5" type="Node2D" parent="GroundFloor/Doors"]
position = Vector2(-60, -8)

[node name="RigidBody2D" type="RigidBody2D" parent="GroundFloor/Doors/Door5"]
position = Vector2(1583, 1229)
gravity_scale = 0.0

[node name="Sprite2D" type="Sprite2D" parent="GroundFloor/Doors/Door5/RigidBody2D"]
position = Vector2(0, 6.49996)
scale = Vector2(1, 1.42391)
texture = ExtResource("4_wxte6")

[node name="NavigationObstacle2D" type="NavigationObstacle2D" parent="GroundFloor/Doors/Door5/RigidBody2D"]
avoidance_enabled = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="GroundFloor/Doors/Door5/RigidBody2D"]
position = Vector2(0, 6.5)
shape = SubResource("RectangleShape2D_sq75s")

[node name="StaticBody2D2" type="StaticBody2D" parent="GroundFloor/Doors/Door5"]
position = Vector2(752, 649)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="GroundFloor/Doors/Door5/StaticBody2D2"]
position = Vector2(830, 714)
polygon = PackedVector2Array(-12, -49, 1, -62, 14, -48, 14, 78, -12, 78)

[node name="PinJoint2D2" type="PinJoint2D" parent="GroundFloor/Doors/Door5"]
position = Vector2(1583, 1301)
node_a = NodePath("../RigidBody2D")
node_b = NodePath("../StaticBody2D2")
disable_collision = false

[node name="Door6" type="Node2D" parent="GroundFloor/Doors"]

[node name="RigidBody2D" type="RigidBody2D" parent="GroundFloor/Doors/Door6"]
position = Vector2(1250, 1000)
gravity_scale = 0.0

[node name="Sprite2D" type="Sprite2D" parent="GroundFloor/Doors/Door6/RigidBody2D"]
position = Vector2(-22.0118, 116)
rotation = -4.71238
scale = Vector2(1, 1.41816)
texture = ExtResource("4_wxte6")

[node name="NavigationObstacle2D" type="NavigationObstacle2D" parent="GroundFloor/Doors/Door6/RigidBody2D"]
avoidance_enabled = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="GroundFloor/Doors/Door6/RigidBody2D"]
position = Vector2(-22, 116)
rotation = -4.71238
shape = SubResource("RectangleShape2D_sq75s")

[node name="StaticBody2D2" type="StaticBody2D" parent="GroundFloor/Doors/Door6"]
position = Vector2(419, 408)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="GroundFloor/Doors/Door6/StaticBody2D2"]
position = Vector2(681, 706.5)
rotation = -4.71238
polygon = PackedVector2Array(-12, -49, 1, -62, 14, -48, 14, 78, -12, 78)

[node name="PinJoint2D2" type="PinJoint2D" parent="GroundFloor/Doors/Door6"]
position = Vector2(1162, 1115)
rotation = 1.57081
node_a = NodePath("../RigidBody2D")
node_b = NodePath("../StaticBody2D2")
disable_collision = false

[node name="Door7" type="Node2D" parent="GroundFloor/Doors"]

[node name="RigidBody2D" type="RigidBody2D" parent="GroundFloor/Doors/Door7"]
position = Vector2(1853, 883)
gravity_scale = 0.0

[node name="Sprite2D" type="Sprite2D" parent="GroundFloor/Doors/Door7/RigidBody2D"]
position = Vector2(-21.4632, 116)
rotation = -4.71238
scale = Vector2(1, 1.42236)
texture = ExtResource("4_wxte6")

[node name="NavigationObstacle2D" type="NavigationObstacle2D" parent="GroundFloor/Doors/Door7/RigidBody2D"]
avoidance_enabled = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="GroundFloor/Doors/Door7/RigidBody2D"]
position = Vector2(-22, 116)
rotation = -4.71238
shape = SubResource("RectangleShape2D_sq75s")

[node name="StaticBody2D2" type="StaticBody2D" parent="GroundFloor/Doors/Door7"]
position = Vector2(1022, 291)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="GroundFloor/Doors/Door7/StaticBody2D2"]
position = Vector2(681, 706.5)
rotation = -4.71238
polygon = PackedVector2Array(-12, -49, 1, -62, 14, -48, 14, 78, -12, 78)

[node name="PinJoint2D2" type="PinJoint2D" parent="GroundFloor/Doors/Door7"]
position = Vector2(1765, 998)
rotation = 1.57081
node_a = NodePath("../RigidBody2D")
node_b = NodePath("../StaticBody2D2")
disable_collision = false

[node name="Characters" type="Node2D" parent="GroundFloor"]

[node name="CharacterBody2D5" type="CharacterBody2D" parent="GroundFloor/Characters" node_paths=PackedStringArray("_agent", "_camera")]
position = Vector2(905, 595)
script = ExtResource("5_u7m7i")
_agent = NodePath("NavigationAgent2D")
_camera = NodePath("Camera2D")

[node name="CollisionShape2D" type="CollisionShape2D" parent="GroundFloor/Characters/CharacterBody2D5"]
scale = Vector2(3.285, 3.285)
shape = SubResource("CircleShape2D_rv6dr")

[node name="Sprite2D" type="Sprite2D" parent="GroundFloor/Characters/CharacterBody2D5"]
position = Vector2(-2.38419e-07, -1.52588e-05)
scale = Vector2(0.21225, 0.21225)
texture = ExtResource("6_iic4b")

[node name="NavigationAgent2D" type="NavigationAgent2D" parent="GroundFloor/Characters/CharacterBody2D5"]
path_desired_distance = 65.0
target_desired_distance = 65.0
avoidance_enabled = true
radius = 20.0
time_horizon_agents = 0.66
debug_enabled = true

[node name="Camera2D" type="Camera2D" parent="GroundFloor/Characters/CharacterBody2D5"]

[node name="TextureProgressBar" parent="GroundFloor/Characters/CharacterBody2D5/Camera2D" instance=ExtResource("4_8rkpa")]
offset_left = -876.0
offset_top = -460.0
offset_right = -735.0
offset_bottom = -397.0

[node name="Enemy" type="Node2D" parent="GroundFloor"]
position = Vector2(328, 563)
script = ExtResource("7_kk71b")
_triggerRange = 100.0
_enemyData = ExtResource("8_g1nty")

[connection signal="velocity_computed" from="GroundFloor/Characters/CharacterBody2D5/NavigationAgent2D" to="GroundFloor/Characters/CharacterBody2D5" method="OnNavigationAgent2DVelocityComputed"]
