[gd_scene load_steps=13 format=3 uid="uid://dmfp5lawyswyl"]

[ext_resource type="Script" path="res://src/PartyScene.cs" id="1_mj4je"]
[ext_resource type="Texture2D" uid="uid://bkucbxxb4rwh0" path="res://Assets/Sprites/Environment_test.png" id="2_mq7b2"]
[ext_resource type="PackedScene" uid="uid://cv7lwki55h2ma" path="res://Scenes/EncounterScene.tscn" id="2_v5x6g"]
[ext_resource type="PackedScene" uid="uid://d21hljw8t080d" path="res://Scenes/Subscenes/SocialBattery.tscn" id="4_8rkpa"]
[ext_resource type="Texture2D" uid="uid://d3hx3upwa0rgm" path="res://Assets/Sprites/door.png" id="4_wxte6"]
[ext_resource type="Script" path="res://src/Movement.cs" id="5_u7m7i"]
[ext_resource type="Texture2D" uid="uid://cvmv3sr1jrvrj" path="res://Assets/Sprites/PersonIcon.png" id="6_iic4b"]
[ext_resource type="Script" path="res://src/Enemy.cs" id="7_kk71b"]
[ext_resource type="Resource" uid="uid://bqgn3w6aagdea" path="res://GameDataResources/EnemyData/NeighborDave.tres" id="8_chnix"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_ky745"]
vertices = PackedVector2Array(2207, 125, 2207, 623, 1934, 245, 1934, 224, 1933, 506, 1934, 528, 901, 409, 901, 659, 553, 659, 554, 159, 900, 159, 901, 387, 1934, 125, 1865, 224, 1866, 245, 1551, 508, 1551, 445, 1865, 445, 1865, 509, 1934, 623, 1865, 528, 1865, 624, 1649, 624, 1629, 623, 1551, 528, 1649, 692, 1629, 692, 1551, 623, 1241, 771, 1405, 771, 1405, 815, 1865, 692, 1865, 937, 1474, 937, 1474, 836, 1525, 692, 1474, 815, 1405, 836, 1405, 862, 1153, 862, 1153, 771, 1219, 771, 1219, 703, 969, 703, 969, 554, 1121, 554, 1091, 485, 969, 485, 969, 409, 1126, 451, 969, 387, 969, 125, 1194, 125, 1194, 383, 1159, 421, 1262, 411, 1262, 124, 1865, 124, 1483, 377, 1866, 376, 1483, 508, 1208, 467, 1483, 528, 1241, 703, 1174, 499, 1483, 639, 1421, 703, 1474, 744)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3), PackedInt32Array(4, 2, 1, 5), PackedInt32Array(6, 7, 8, 9, 10), PackedInt32Array(6, 10, 11), PackedInt32Array(3, 12, 0), PackedInt32Array(13, 3, 2, 14), PackedInt32Array(15, 16, 17, 18), PackedInt32Array(1, 19, 5), PackedInt32Array(4, 5, 20, 18), PackedInt32Array(15, 20, 21, 22, 23, 24), PackedInt32Array(22, 25, 26, 23), PackedInt32Array(23, 27, 24), PackedInt32Array(28, 29, 30), PackedInt32Array(25, 31, 32, 33, 34), PackedInt32Array(26, 25, 34), PackedInt32Array(35, 26, 34, 36), PackedInt32Array(37, 38, 39, 40, 41), PackedInt32Array(42, 43, 44, 45), PackedInt32Array(46, 47, 48, 49), PackedInt32Array(48, 6, 11, 50), PackedInt32Array(50, 51, 52, 53, 54), PackedInt32Array(48, 50, 54, 49), PackedInt32Array(55, 56, 57, 13), PackedInt32Array(55, 13, 14, 58), PackedInt32Array(14, 59, 58), PackedInt32Array(55, 58, 60, 61), PackedInt32Array(15, 18, 20), PackedInt32Array(60, 15, 24, 62), PackedInt32Array(63, 42, 45, 64, 61), PackedInt32Array(64, 49, 54, 61), PackedInt32Array(61, 60, 62), PackedInt32Array(61, 62, 65, 66, 63), PackedInt32Array(42, 63, 28, 41), PackedInt32Array(37, 41, 28, 30), PackedInt32Array(37, 30, 36, 34), PackedInt32Array(35, 36, 67)])
outlines = Array[PackedVector2Array]([PackedVector2Array(2231.93, 99.5282, 2232, 648, 2000, 648, 1909.14, 647.612, 1909.14, 553.462, 1890.31, 553.462, 1890.31, 648.957, 1674.44, 648.957, 1674.44, 667.114, 1890.31, 667.114, 1890.31, 961.667, 1449.15, 961.667, 1449.15, 860.792, 1423.59, 860.792, 1423.59, 790.18, 1449.15, 790.18, 1449.15, 735.036, 1515.05, 667.114, 1603.82, 667.114, 1603.82, 648.284, 1525.81, 648.284, 1525.81, 553.462, 1507.66, 553.462, 1507.66, 648.957, 1430.99, 727.638, 1265.56, 727.638, 1265.56, 746.468, 1430.32, 746.468, 1430.32, 887.02, 1128.37, 887.02, 1128.37, 746.468, 1194.27, 746.468, 1194.27, 728.311, 944.106, 728.311, 944.106, 528.58, 1110.21, 528.58, 1139.13, 498.99, 1126.35, 486.213, 1102.14, 510.423, 944.106, 510.423, 944.106, 433.758, 925.948, 433.758, 925.948, 683.926, 527.831, 683.926, 528.504, 134.498, 925.276, 134.498, 925.948, 362.474, 944.106, 362.474, 944.106, 99.5282, 1219.16, 99.5282, 1219.16, 392.736, 1193.6, 419.636, 1207.05, 432.413, 1237.31, 400.806, 1237.31, 98.8557, 1890.31, 99.5282, 1890.98, 401.478, 1507.66, 402.151, 1507.66, 482.85, 1525.81, 482.85, 1525.81, 420.308, 1890.31, 420.308, 1890.31, 482.85, 1908.46, 482.178, 1908.84, 270.062, 1882.91, 270.342, 1883.58, 199.057, 1909.14, 199.057, 1909.14, 99.5282)])
source_geometry_group_name = &"navigation_polygon_source_group"
agent_radius = 25.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_sq75s"]
size = Vector2(8, 105)

[sub_resource type="CircleShape2D" id="CircleShape2D_rv6dr"]
radius = 8.83325

[node name="Node2D" type="Node2D" node_paths=PackedStringArray("_socialBattery")]
script = ExtResource("1_mj4je")
_socialBattery = NodePath("GroundFloor/Characters/CharacterBody2D5/Camera2D/TextureProgressBar")

[node name="CanvasLayer" type="CanvasLayer" parent="."]
process_mode = 4
visible = false

[node name="EncounterScene" parent="CanvasLayer" instance=ExtResource("2_v5x6g")]

[node name="GroundFloor" type="Node2D" parent="."]

[node name="EnvironmentTest" type="Sprite2D" parent="GroundFloor"]
position = Vector2(1434.56, 809.002)
scale = Vector2(1.48704, 1.48704)
texture = ExtResource("2_mq7b2")

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="GroundFloor"]
position = Vector2(-558.885, 20.0016)
scale = Vector2(1.487, 1.487)
navigation_polygon = SubResource("NavigationPolygon_ky745")

[node name="Doors" type="Node2D" parent="GroundFloor"]

[node name="Door" type="Node2D" parent="GroundFloor/Doors"]

[node name="RigidBody2D" type="RigidBody2D" parent="GroundFloor/Doors/Door"]
position = Vector2(1696, 784)
gravity_scale = 0.0

[node name="Sprite2D" type="Sprite2D" parent="GroundFloor/Doors/Door/RigidBody2D"]
position = Vector2(0, 6.5)
scale = Vector2(1, 1.1413)
texture = ExtResource("4_wxte6")

[node name="NavigationObstacle2D" type="NavigationObstacle2D" parent="GroundFloor/Doors/Door/RigidBody2D"]
avoidance_enabled = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="GroundFloor/Doors/Door/RigidBody2D"]
position = Vector2(0, 6.5)
shape = SubResource("RectangleShape2D_sq75s")

[node name="StaticBody2D2" type="StaticBody2D" parent="GroundFloor/Doors/Door"]
position = Vector2(865, 192)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="GroundFloor/Doors/Door/StaticBody2D2"]
position = Vector2(830, 714)
polygon = PackedVector2Array(-12, -49, 1, -62, 14, -48, 14, 78, -12, 78)

[node name="PinJoint2D2" type="PinJoint2D" parent="GroundFloor/Doors/Door"]
position = Vector2(1696, 844)
node_a = NodePath("../RigidBody2D")
node_b = NodePath("../StaticBody2D2")
disable_collision = false

[node name="Door2" type="Node2D" parent="GroundFloor/Doors"]

[node name="RigidBody2D" type="RigidBody2D" parent="GroundFloor/Doors/Door2"]
position = Vector2(831, 605)
gravity_scale = 0.0

[node name="Sprite2D" type="Sprite2D" parent="GroundFloor/Doors/Door2/RigidBody2D"]
position = Vector2(0, 6.5)
scale = Vector2(1, 1.1413)
texture = ExtResource("4_wxte6")

[node name="NavigationObstacle2D" type="NavigationObstacle2D" parent="GroundFloor/Doors/Door2/RigidBody2D"]
avoidance_enabled = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="GroundFloor/Doors/Door2/RigidBody2D"]
position = Vector2(0, 6.5)
shape = SubResource("RectangleShape2D_sq75s")

[node name="StaticBody2D2" type="StaticBody2D" parent="GroundFloor/Doors/Door2"]
position = Vector2(0, 13)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="GroundFloor/Doors/Door2/StaticBody2D2"]
position = Vector2(830, 714)
polygon = PackedVector2Array(-12, -49, 1, -62, 14, -48, 14, 78, -12, 78)

[node name="PinJoint2D2" type="PinJoint2D" parent="GroundFloor/Doors/Door2"]
position = Vector2(831, 665)
node_a = NodePath("../RigidBody2D")
node_b = NodePath("../StaticBody2D2")
bias = 0.9
disable_collision = false
angular_limit_enabled = true
angular_limit_lower = -1.5708
angular_limit_upper = 1.5708

[node name="Door3" type="Node2D" parent="GroundFloor/Doors"]

[node name="RigidBody2D" type="RigidBody2D" parent="GroundFloor/Doors/Door3"]
position = Vector2(2266, 362)
gravity_scale = 0.0

[node name="Sprite2D" type="Sprite2D" parent="GroundFloor/Doors/Door3/RigidBody2D"]
position = Vector2(0, 6.5)
scale = Vector2(1, 1.1413)
texture = ExtResource("4_wxte6")

[node name="NavigationObstacle2D" type="NavigationObstacle2D" parent="GroundFloor/Doors/Door3/RigidBody2D"]
avoidance_enabled = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="GroundFloor/Doors/Door3/RigidBody2D"]
position = Vector2(0, 6.5)
shape = SubResource("RectangleShape2D_sq75s")

[node name="StaticBody2D2" type="StaticBody2D" parent="GroundFloor/Doors/Door3"]
position = Vector2(1435, -230)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="GroundFloor/Doors/Door3/StaticBody2D2"]
position = Vector2(830, 714)
polygon = PackedVector2Array(-12, -49, 1, -62, 14, -48, 14, 78, -12, 78)

[node name="PinJoint2D2" type="PinJoint2D" parent="GroundFloor/Doors/Door3"]
position = Vector2(2266, 422)
node_a = NodePath("../RigidBody2D")
node_b = NodePath("../StaticBody2D2")
disable_collision = false

[node name="Door4" type="Node2D" parent="GroundFloor/Doors"]

[node name="RigidBody2D" type="RigidBody2D" parent="GroundFloor/Doors/Door4"]
position = Vector2(2267, 784)
gravity_scale = 0.0

[node name="Sprite2D" type="Sprite2D" parent="GroundFloor/Doors/Door4/RigidBody2D"]
position = Vector2(0, 6.5)
scale = Vector2(1, 1.1413)
texture = ExtResource("4_wxte6")

[node name="NavigationObstacle2D" type="NavigationObstacle2D" parent="GroundFloor/Doors/Door4/RigidBody2D"]
avoidance_enabled = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="GroundFloor/Doors/Door4/RigidBody2D"]
position = Vector2(0, 6.5)
shape = SubResource("RectangleShape2D_sq75s")

[node name="StaticBody2D2" type="StaticBody2D" parent="GroundFloor/Doors/Door4"]
position = Vector2(1436, 192)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="GroundFloor/Doors/Door4/StaticBody2D2"]
position = Vector2(830, 714)
polygon = PackedVector2Array(-12, -49, 1, -62, 14, -48, 14, 78, -12, 78)

[node name="PinJoint2D2" type="PinJoint2D" parent="GroundFloor/Doors/Door4"]
position = Vector2(2267, 844)
node_a = NodePath("../RigidBody2D")
node_b = NodePath("../StaticBody2D2")
disable_collision = false

[node name="Door5" type="Node2D" parent="GroundFloor/Doors"]

[node name="RigidBody2D" type="RigidBody2D" parent="GroundFloor/Doors/Door5"]
position = Vector2(1583, 1241)
gravity_scale = 0.0

[node name="Sprite2D" type="Sprite2D" parent="GroundFloor/Doors/Door5/RigidBody2D"]
position = Vector2(0, 6.5)
scale = Vector2(1, 1.1413)
texture = ExtResource("4_wxte6")

[node name="NavigationObstacle2D" type="NavigationObstacle2D" parent="GroundFloor/Doors/Door5/RigidBody2D"]
avoidance_enabled = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="GroundFloor/Doors/Door5/RigidBody2D"]
position = Vector2(0, 6.5)
shape = SubResource("RectangleShape2D_sq75s")

[node name="StaticBody2D2" type="StaticBody2D" parent="GroundFloor/Doors/Door5"]
position = Vector2(752, 649)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="GroundFloor/Doors/Door5/StaticBody2D2"]
position = Vector2(830, 714)
polygon = PackedVector2Array(-12, -49, 1, -62, 14, -48, 14, 78, -12, 78)

[node name="PinJoint2D2" type="PinJoint2D" parent="GroundFloor/Doors/Door5"]
position = Vector2(1583, 1301)
node_a = NodePath("../RigidBody2D")
node_b = NodePath("../StaticBody2D2")
disable_collision = false

[node name="Door6" type="Node2D" parent="GroundFloor/Doors"]

[node name="RigidBody2D" type="RigidBody2D" parent="GroundFloor/Doors/Door6"]
position = Vector2(1303, 1000)
gravity_scale = 0.0

[node name="Sprite2D" type="Sprite2D" parent="GroundFloor/Doors/Door6/RigidBody2D"]
position = Vector2(-32.5, 116)
rotation = -4.71238
scale = Vector2(1, 1.1413)
texture = ExtResource("4_wxte6")

[node name="NavigationObstacle2D" type="NavigationObstacle2D" parent="GroundFloor/Doors/Door6/RigidBody2D"]
avoidance_enabled = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="GroundFloor/Doors/Door6/RigidBody2D"]
position = Vector2(-32.5, 116)
rotation = -4.71238
shape = SubResource("RectangleShape2D_sq75s")

[node name="StaticBody2D2" type="StaticBody2D" parent="GroundFloor/Doors/Door6"]
position = Vector2(472, 408)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="GroundFloor/Doors/Door6/StaticBody2D2"]
position = Vector2(681, 706.5)
rotation = -4.71238
polygon = PackedVector2Array(-12, -49, 1, -62, 14, -48, 14, 78, -12, 78)

[node name="PinJoint2D2" type="PinJoint2D" parent="GroundFloor/Doors/Door6"]
position = Vector2(1215, 1115)
rotation = 1.57081
node_a = NodePath("../RigidBody2D")
node_b = NodePath("../StaticBody2D2")
disable_collision = false

[node name="Door7" type="Node2D" parent="GroundFloor/Doors"]

[node name="RigidBody2D" type="RigidBody2D" parent="GroundFloor/Doors/Door7"]
position = Vector2(1911, 883)
gravity_scale = 0.0

[node name="Sprite2D" type="Sprite2D" parent="GroundFloor/Doors/Door7/RigidBody2D"]
position = Vector2(-32.5, 116)
rotation = -4.71238
scale = Vector2(1, 1.1413)
texture = ExtResource("4_wxte6")

[node name="NavigationObstacle2D" type="NavigationObstacle2D" parent="GroundFloor/Doors/Door7/RigidBody2D"]
avoidance_enabled = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="GroundFloor/Doors/Door7/RigidBody2D"]
position = Vector2(-32.5, 116)
rotation = -4.71238
shape = SubResource("RectangleShape2D_sq75s")

[node name="StaticBody2D2" type="StaticBody2D" parent="GroundFloor/Doors/Door7"]
position = Vector2(1080, 291)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="GroundFloor/Doors/Door7/StaticBody2D2"]
position = Vector2(681, 706.5)
rotation = -4.71238
polygon = PackedVector2Array(-12, -49, 1, -62, 14, -48, 14, 78, -12, 78)

[node name="PinJoint2D2" type="PinJoint2D" parent="GroundFloor/Doors/Door7"]
position = Vector2(1823, 998)
rotation = 1.57081
node_a = NodePath("../RigidBody2D")
node_b = NodePath("../StaticBody2D2")
disable_collision = false

[node name="Characters" type="Node2D" parent="GroundFloor"]

[node name="CharacterBody2D5" type="CharacterBody2D" parent="GroundFloor/Characters" node_paths=PackedStringArray("_agent", "_camera")]
position = Vector2(1154, 400)
script = ExtResource("5_u7m7i")
_agent = NodePath("NavigationAgent2D")
_camera = NodePath("Camera2D")

[node name="CollisionShape2D" type="CollisionShape2D" parent="GroundFloor/Characters/CharacterBody2D5"]
scale = Vector2(3.285, 3.285)
shape = SubResource("CircleShape2D_rv6dr")

[node name="Sprite2D" type="Sprite2D" parent="GroundFloor/Characters/CharacterBody2D5"]
position = Vector2(-2.38419e-07, -1.52588e-05)
scale = Vector2(0.21225, 0.21225)
texture = ExtResource("6_iic4b")

[node name="NavigationAgent2D" type="NavigationAgent2D" parent="GroundFloor/Characters/CharacterBody2D5"]
path_desired_distance = 65.0
target_desired_distance = 65.0
avoidance_enabled = true
radius = 20.0
time_horizon_agents = 0.66
debug_enabled = true

[node name="Camera2D" type="Camera2D" parent="GroundFloor/Characters/CharacterBody2D5"]

[node name="TextureProgressBar" parent="GroundFloor/Characters/CharacterBody2D5/Camera2D" instance=ExtResource("4_8rkpa")]
offset_left = -876.0
offset_top = -460.0
offset_right = -735.0
offset_bottom = -397.0

[node name="Enemy" type="Node2D" parent="GroundFloor"]
position = Vector2(328, 563)
script = ExtResource("7_kk71b")
_triggerRange = 100.0
_enemyData = ExtResource("8_chnix")

[connection signal="velocity_computed" from="GroundFloor/Characters/CharacterBody2D5/NavigationAgent2D" to="GroundFloor/Characters/CharacterBody2D5" method="OnNavigationAgent2DVelocityComputed"]
